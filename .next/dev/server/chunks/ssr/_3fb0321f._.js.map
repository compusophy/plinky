{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/25/nov-25/gamba/plinky/constants.ts"],"sourcesContent":["export const ROWS = 7;\r\n\r\nexport const MULTIPLIERS = [\r\n  3.7, 2.1, 1.05, 0.58, 0.58, 1.05, 2.1, 3.7\r\n];\r\n\r\nexport const MULTIPLIER_COLORS: { [key: number]: string } = {\r\n  0.9: 'bg-purple-500',\r\n  1.0: 'bg-blue-500',\r\n  1.5: 'bg-cyan-500',\r\n  2.0: 'bg-teal-500',\r\n  4.0: 'bg-green-500',\r\n  7.0: 'bg-yellow-500',\r\n  15.0: 'bg-orange-500',\r\n  50.0: 'bg-red-500',\r\n  100.0: 'bg-pink-500',\r\n};\r\n\r\nexport const getMultiplierColor = (multiplier: number): string => {\r\n  const keys = Object.keys(MULTIPLIER_COLORS).map(Number).sort((a,b) => a-b);\r\n  for(const key of keys) {\r\n      if(multiplier <= key) {\r\n          return MULTIPLIER_COLORS[key];\r\n      }\r\n  }\r\n  return MULTIPLIER_COLORS[keys[keys.length-1]];\r\n};"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,OAAO;AAEb,MAAM,cAAc;IACzB;IAAK;IAAK;IAAM;IAAM;IAAM;IAAM;IAAK;CACxC;AAEM,MAAM,oBAA+C;IAC1D,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,MAAM;IACN,MAAM;IACN,OAAO;AACT;AAEO,MAAM,qBAAqB,CAAC;IACjC,MAAM,OAAO,OAAO,IAAI,CAAC,mBAAmB,GAAG,CAAC,QAAQ,IAAI,CAAC,CAAC,GAAE,IAAM,IAAE;IACxE,KAAI,MAAM,OAAO,KAAM;QACnB,IAAG,cAAc,KAAK;YAClB,OAAO,iBAAiB,CAAC,IAAI;QACjC;IACJ;IACA,OAAO,iBAAiB,CAAC,IAAI,CAAC,KAAK,MAAM,GAAC,EAAE,CAAC;AAC/C"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///C:/25/nov-25/gamba/plinky/components/PlinkoBoard.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo } from 'react';\nimport Matter from 'matter-js';\nimport { ROWS } from '../constants';\n\ninterface PlinkoBoardProps {\n  multipliers: number[];\n  playTrigger: number;\n  onGameEnd: (binIndex: number) => void;\n  gravity: number;\n}\n\ntype BinData = {\n    multiplier: number;\n    left: number;\n    width: number;\n    height: number;\n    bottom: number;\n};\n\ntype BoardElements = {\n    staticBodies: Matter.Body[];\n    pegElements: React.ReactElement[];\n    binData: BinData[];\n    ballRadius: number;\n    ballStartX: number;\n    ballStartY: number;\n};\n\nconst PlinkoBoard: React.FC<PlinkoBoardProps> = ({ multipliers, playTrigger, onGameEnd, gravity }) => {\n  const sceneRef = useRef<HTMLDivElement>(null);\n  const engineRef = useRef<Matter.Engine | undefined>(undefined);\n  const runnerRef = useRef<Matter.Runner | undefined>(undefined);\n  const lastPlayTrigger = useRef(playTrigger);\n  const settledBallRef = useRef<Matter.Body | null>(null);\n  const initialBallRef = useRef<Matter.Body | null>(null);\n  \n  const [balls, setBalls] = useState<Record<string, { x: number; y: number; angle: number }>>({});\n  const [winningBin, setWinningBin] = useState<number | null>(null);\n  const [boardElements, setBoardElements] = useState<BoardElements | null>(null);\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n\n  useEffect(() => {\n    if (!sceneRef.current) return;\n    const resizeObserver = new ResizeObserver(() => {\n        if (sceneRef.current) {\n            const { width, height } = sceneRef.current.getBoundingClientRect();\n            setDimensions({ width, height });\n        }\n    });\n    resizeObserver.observe(sceneRef.current);\n    return () => resizeObserver.disconnect();\n  }, []);\n\n  useEffect(() => {\n    const { width, height } = dimensions;\n    if (width === 0 || height === 0) return;\n    \n    const binCount = multipliers.length;\n    const pegRows = ROWS;\n\n    const ballRadius = Math.max(3, width * 0.02);\n    const pegRadius = Math.max(1.5, width * 0.01);\n    \n    const hSpacing = width / (binCount);\n    \n    // Calculate uniform spacing: space above ball = spacing between rows\n    // Container has header (vSpacing) + main + footer (vSpacing)\n    // Main has: space above ball + ball-to-row0 + (pegRows-1) spacings + space after last peg + space to bins\n    // Total spacings in main = 1 (above ball) + 1 (ball to row0) + (pegRows-1) + 1 (after last peg) + 1 (to bins) = pegRows + 3\n    const bottomPadding = hSpacing; // Space for bins\n    const totalSpacings = pegRows + 3; // Above ball + between rows + after last peg + to bins\n    const vSpacing = (height - bottomPadding) / totalSpacings;\n    \n    // Position ball: space from top to ball center = vSpacing\n    const ballStartX = width / 2;\n    const ballStartY = vSpacing; // Ball center is vSpacing from top\n    \n    // First row of pegs starts one spacing below the ball center\n    const pegGridStartY = ballStartY + vSpacing;\n    \n    // Calculate where bins start (completely below last row of pegs)\n    // Last row of pegs is at: pegGridStartY + (pegRows - 1) * vSpacing\n    // Add full spacing below it to ensure bins are completely under\n    const lastPegRowY = pegGridStartY + (pegRows - 1) * vSpacing;\n    const pegAreaBottom = lastPegRowY + vSpacing;\n    \n    const ballStartYAdjusted = ballStartY;\n\n    const staticBodies: Matter.Body[] = [];\n    const pegElements: React.ReactElement[] = [];\n\n    for (let row = 0; row < pegRows; row++) {\n      const pegsInRow = row + 2;\n      const y = pegGridStartY + row * vSpacing;\n      const totalRowWidth = (pegsInRow - 1) * hSpacing;\n      const startX = (width - totalRowWidth) / 2;\n\n      for (let col = 0; col < pegsInRow; col++) {\n        const x = startX + col * hSpacing;\n        const peg = Matter.Bodies.circle(x, y, pegRadius, { \n            isStatic: true, label: 'peg', restitution: 0.5, friction: 0.05 \n        });\n        staticBodies.push(peg);\n        pegElements.push(<div key={`p-${row}-${col}`} className=\"absolute rounded-full shadow-lg\" style={{ left: x, top: y, width: pegRadius * 2, height: pegRadius * 2, transform: 'translate(-50%, -50%)', background: 'radial-gradient(circle at 30% 30%, #c1c1c1, #777)' }} />);\n      }\n    }\n\n    const binDividerTopY = pegAreaBottom;\n    const binWallHeight = vSpacing; // Match row height for uniform spacing\n    const binBottomY = binDividerTopY + binWallHeight;\n    \n    const floor = Matter.Bodies.rectangle(width / 2, binBottomY + ballRadius * 2, width * 3, 4, { isStatic: true, label: 'floor' });\n    staticBodies.push(floor);\n\n    for (let i = 0; i < binCount + 1; i++) {\n        const x = i * hSpacing;\n        const pegPart = Matter.Bodies.circle(x, binDividerTopY, pegRadius, { isStatic: true, restitution: 0.5, friction: 0.05 });\n        const wallPart = Matter.Bodies.rectangle(x, binDividerTopY + binWallHeight / 2, pegRadius, binWallHeight, { isStatic: true });\n        const dividerBody = Matter.Body.create({ parts: [pegPart, wallPart], isStatic: true, label: 'divider' });\n        staticBodies.push(dividerBody);\n        pegElements.push(<div key={`d-p-${i}`} className=\"absolute rounded-full shadow-lg\" style={{ left: x, top: binDividerTopY, width: pegRadius * 2, height: pegRadius * 2, transform: 'translate(-50%, -50%)', background: 'radial-gradient(circle at 30% 30%, #c1c1c1, #777)' }} />);\n    }\n\n    const binData: BinData[] = [];\n    for (let i = 0; i < binCount; i++) {\n        const sensorX = i * hSpacing + hSpacing / 2;\n        const sensorHeight = binWallHeight;\n        // Sensor top should align with binDividerTopY (center of divider nodes), so center is at binDividerTopY + sensorHeight/2\n        const sensorY = binDividerTopY + sensorHeight / 2;\n        const sensor = Matter.Bodies.rectangle(sensorX, sensorY, hSpacing, sensorHeight, { isStatic: true, isSensor: true, label: `bin-${i}` });\n        staticBodies.push(sensor);\n\n        const binFloorX = sensorX;\n        const binFloorY = binBottomY - (pegRadius / 2);\n        const binFloorWidth = hSpacing;\n        const binFloorHeight = pegRadius;\n        const binFloorBody = Matter.Bodies.rectangle(binFloorX, binFloorY, binFloorWidth, binFloorHeight, { isStatic: true, label: 'bin-floor' });\n        staticBodies.push(binFloorBody);\n\n        // Calculate bottom offset: bins should start at binDividerTopY (center of divider nodes) and extend downward\n        // The top of the bin should be at binDividerTopY, so bottom = height - binDividerTopY - binWallHeight\n        const binBottomOffset = height - binDividerTopY - binWallHeight;\n        \n        binData.push({\n            multiplier: multipliers[i],\n            left: (i * 100) / binCount,\n            width: 100 / binCount,\n            height: binWallHeight,\n            bottom: binBottomOffset\n        });\n    }\n\n    setBoardElements({ staticBodies, pegElements, binData, ballRadius, ballStartX, ballStartY: ballStartYAdjusted });\n  }, [dimensions, multipliers]);\n\n  const binElements = useMemo(() => {\n      if (!boardElements) return [];\n      \n      // Rainbow colors mirror-symmetrical: purple at edges, red in middle (semi-transparent)\n      const rainbowColors = [\n        'bg-purple-500/30',   // Bin 0 - Purple (outer left)\n        'bg-indigo-500/30',   // Bin 1 - Indigo\n        'bg-blue-500/30',     // Bin 2 - Blue\n        'bg-red-500/30',      // Bin 3 - Red (middle left)\n        'bg-red-500/30',      // Bin 4 - Red (middle right)\n        'bg-blue-500/30',     // Bin 5 - Blue\n        'bg-indigo-500/30',   // Bin 6 - Indigo\n        'bg-purple-500/30',   // Bin 7 - Purple (outer right)\n      ];\n      \n      return boardElements.binData.map((data: BinData, i: number) => {\n        const multiplier = data.multiplier;\n        const colorClass = rainbowColors[i] || 'bg-gray-500/30';\n        // Extract base color for border and shadow (remove opacity and bg- prefix)\n        const baseColor = colorClass.replace('bg-', '').replace('/30', '');\n        const borderColorClass = `border-${baseColor}`;\n        const shadowColorClass = `shadow-${baseColor}`;\n        const isWinning = winningBin === i;\n        \n        // No background, only add glow when winning\n        const glowClass = isWinning ? `shadow-[0_0_15px] ${shadowColorClass}` : '';\n        const binClasses = `w-full h-full flex items-center justify-center text-white font-bold text-xs md:text-sm transition-all duration-300 border-l border-r border-b border-t-0 bg-transparent ${borderColorClass} ${glowClass}`;\n        \n        return (\n            <div key={`b-${i}`} className=\"absolute flex items-center justify-center\" style={{ left: `${data.left}%`, width: `${data.width}%`, bottom: `${data.bottom}px`, height: `${data.height}px` }}>\n                <div className={binClasses}>\n                    {multiplier.toFixed(2)}x\n                </div>\n            </div>\n        )\n      })\n  }, [boardElements, winningBin, multipliers]);\n\n  useEffect(() => {\n    const engine = Matter.Engine.create({ gravity: { y: gravity } });\n    const runner = Matter.Runner.create();\n    engineRef.current = engine;\n    runnerRef.current = runner;\n    \n    if (!boardElements) return;\n\n    Matter.Composite.add(engine.world, boardElements.staticBodies);\n    \n    // Create initial static ball at starting position\n    const { ballStartX, ballStartY, ballRadius } = boardElements;\n    const initialBall = Matter.Bodies.circle(ballStartX, ballStartY, ballRadius, {\n      label: 'ball',\n      isStatic: true,\n    });\n    Matter.Composite.add(engine.world, initialBall);\n    initialBallRef.current = initialBall;\n    \n    Matter.Runner.run(runner, engine);\n\n    let animationFrameId: number;\n    const update = () => {\n        if (!engineRef.current) return;\n        const updatedBalls: Record<string, { x: number; y: number; angle: number }> = {};\n        Matter.Composite.allBodies(engineRef.current.world).forEach((body: Matter.Body) => {\n            if (body.label === 'ball') {\n                updatedBalls[body.id] = { x: body.position.x, y: body.position.y, angle: body.angle };\n            }\n        });\n        setBalls(updatedBalls);\n        animationFrameId = requestAnimationFrame(update);\n    };\n    update();\n    \n    const collisionHandler = (event: Matter.IEventCollision<Matter.Engine>) => {\n        for (const pair of event.pairs) {\n            const { bodyA, bodyB } = pair;\n            const ball = bodyA.label === 'ball' ? bodyA : (bodyB.label === 'ball' ? bodyB : null);\n            if (!ball || (ball as any).isSettled) continue;\n\n            const binSensor = bodyA.label.startsWith('bin-') ? bodyA : (bodyB.label.startsWith('bin-') ? bodyB : null);\n            const floor = bodyA.label === 'floor' ? bodyA : (bodyB.label === 'floor' ? bodyB : null);\n\n            const handleSettled = (binIndex: number) => {\n                if ((ball as any).isSettled) return;\n                (ball as any).isSettled = true;\n                settledBallRef.current = ball;\n\n                onGameEnd(binIndex);\n                if (binIndex !== -1) {\n                    setWinningBin(binIndex);\n                }\n            };\n\n            if (binSensor) {\n                handleSettled(parseInt(binSensor.label.split('-')[1]));\n            } else if (floor) {\n                handleSettled(-1);\n            }\n        }\n    };\n\n    Matter.Events.on(engine, 'collisionStart', collisionHandler);\n\n    return () => {\n        cancelAnimationFrame(animationFrameId);\n        Matter.Events.off(engine, 'collisionStart', collisionHandler);\n        if(runner) Matter.Runner.stop(runner);\n        if(engine) Matter.Engine.clear(engine);\n    };\n  }, [boardElements, onGameEnd]);\n\n  // Update gravity dynamically\n  useEffect(() => {\n    if (engineRef.current) {\n      engineRef.current.world.gravity.y = gravity;\n    }\n  }, [gravity]);\n\n  useEffect(() => {\n    if (playTrigger > lastPlayTrigger.current) {\n        lastPlayTrigger.current = playTrigger;\n\n        if (settledBallRef.current && engineRef.current) {\n            Matter.World.remove(engineRef.current.world, settledBallRef.current);\n            settledBallRef.current = null;\n        }\n        \n        // Remove initial static ball if it exists\n        if (initialBallRef.current && engineRef.current) {\n            Matter.World.remove(engineRef.current.world, initialBallRef.current);\n            initialBallRef.current = null;\n        }\n        \n        setWinningBin(null);\n\n        if (engineRef.current && boardElements) {\n            const { ballStartX, ballStartY, ballRadius } = boardElements;\n            const randomOffset = (Math.random() - 0.5) * ballRadius * 0.1;\n            const x = ballStartX + randomOffset;\n            const ball = Matter.Bodies.circle(x, ballStartY, ballRadius, {\n                label: 'ball', restitution: 0.6, friction: 0.01, slop: 0.1, density: 0.01,\n            });\n            Matter.Composite.add(engineRef.current.world, ball);\n        }\n    }\n  }, [playTrigger, boardElements]);\n\n  return (\n    <div ref={sceneRef} className=\"relative w-full h-full overflow-hidden\">\n      {boardElements?.pegElements}\n      {binElements}\n      {Object.keys(balls).map((id) => {\n        const pos = balls[id];\n        return (\n          <div key={id} className=\"absolute rounded-full\" style={{\n              background: 'radial-gradient(circle at 30% 30%, #3e9c35, #168118, #157811)',\n              boxShadow: '0 0 5px #168118, 0 0 10px #168118',\n              width: boardElements ? boardElements.ballRadius * 2 : 0,\n              height: boardElements ? boardElements.ballRadius * 2 : 0,\n              left: pos.x,\n              top: pos.y,\n              transform: `translate(-50%, -50%) rotate(${pos.angle}rad)`,\n          }} />\n        );\n      })}\n    </div>\n  );\n};\n\nexport default PlinkoBoard;"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AA0BA,MAAM,cAA0C,CAAC,EAAE,WAAW,EAAE,WAAW,EAAE,SAAS,EAAE,OAAO,EAAE;IAC/F,MAAM,WAAW,IAAA,sVAAM,EAAiB;IACxC,MAAM,YAAY,IAAA,sVAAM,EAA4B;IACpD,MAAM,YAAY,IAAA,sVAAM,EAA4B;IACpD,MAAM,kBAAkB,IAAA,sVAAM,EAAC;IAC/B,MAAM,iBAAiB,IAAA,sVAAM,EAAqB;IAClD,MAAM,iBAAiB,IAAA,sVAAM,EAAqB;IAElD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wVAAQ,EAA0D,CAAC;IAC7F,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,wVAAQ,EAAgB;IAC5D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,wVAAQ,EAAuB;IACzE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,wVAAQ,EAAC;QAAE,OAAO;QAAG,QAAQ;IAAE;IAEnE,IAAA,yVAAS,EAAC;QACR,IAAI,CAAC,SAAS,OAAO,EAAE;QACvB,MAAM,iBAAiB,IAAI,eAAe;YACtC,IAAI,SAAS,OAAO,EAAE;gBAClB,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,SAAS,OAAO,CAAC,qBAAqB;gBAChE,cAAc;oBAAE;oBAAO;gBAAO;YAClC;QACJ;QACA,eAAe,OAAO,CAAC,SAAS,OAAO;QACvC,OAAO,IAAM,eAAe,UAAU;IACxC,GAAG,EAAE;IAEL,IAAA,yVAAS,EAAC;QACR,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;QAC1B,IAAI,UAAU,KAAK,WAAW,GAAG;QAEjC,MAAM,WAAW,YAAY,MAAM;QACnC,MAAM,UAAU,iHAAI;QAEpB,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,QAAQ;QACvC,MAAM,YAAY,KAAK,GAAG,CAAC,KAAK,QAAQ;QAExC,MAAM,WAAW,QAAS;QAE1B,qEAAqE;QACrE,6DAA6D;QAC7D,0GAA0G;QAC1G,4HAA4H;QAC5H,MAAM,gBAAgB,UAAU,iBAAiB;QACjD,MAAM,gBAAgB,UAAU,GAAG,uDAAuD;QAC1F,MAAM,WAAW,CAAC,SAAS,aAAa,IAAI;QAE5C,0DAA0D;QAC1D,MAAM,aAAa,QAAQ;QAC3B,MAAM,aAAa,UAAU,mCAAmC;QAEhE,6DAA6D;QAC7D,MAAM,gBAAgB,aAAa;QAEnC,iEAAiE;QACjE,mEAAmE;QACnE,gEAAgE;QAChE,MAAM,cAAc,gBAAgB,CAAC,UAAU,CAAC,IAAI;QACpD,MAAM,gBAAgB,cAAc;QAEpC,MAAM,qBAAqB;QAE3B,MAAM,eAA8B,EAAE;QACtC,MAAM,cAAoC,EAAE;QAE5C,IAAK,IAAI,MAAM,GAAG,MAAM,SAAS,MAAO;YACtC,MAAM,YAAY,MAAM;YACxB,MAAM,IAAI,gBAAgB,MAAM;YAChC,MAAM,gBAAgB,CAAC,YAAY,CAAC,IAAI;YACxC,MAAM,SAAS,CAAC,QAAQ,aAAa,IAAI;YAEzC,IAAK,IAAI,MAAM,GAAG,MAAM,WAAW,MAAO;gBACxC,MAAM,IAAI,SAAS,MAAM;gBACzB,MAAM,MAAM,oNAAM,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,WAAW;oBAC9C,UAAU;oBAAM,OAAO;oBAAO,aAAa;oBAAK,UAAU;gBAC9D;gBACA,aAAa,IAAI,CAAC;gBAClB,YAAY,IAAI,eAAC,qXAAC;oBAA4B,WAAU;oBAAkC,OAAO;wBAAE,MAAM;wBAAG,KAAK;wBAAG,OAAO,YAAY;wBAAG,QAAQ,YAAY;wBAAG,WAAW;wBAAyB,YAAY;oBAAoD;mBAA1O,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,KAAK;;;;;YAC9C;QACF;QAEA,MAAM,iBAAiB;QACvB,MAAM,gBAAgB,UAAU,uCAAuC;QACvE,MAAM,aAAa,iBAAiB;QAEpC,MAAM,QAAQ,oNAAM,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,GAAG,aAAa,aAAa,GAAG,QAAQ,GAAG,GAAG;YAAE,UAAU;YAAM,OAAO;QAAQ;QAC7H,aAAa,IAAI,CAAC;QAElB,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,GAAG,IAAK;YACnC,MAAM,IAAI,IAAI;YACd,MAAM,UAAU,oNAAM,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,gBAAgB,WAAW;gBAAE,UAAU;gBAAM,aAAa;gBAAK,UAAU;YAAK;YACtH,MAAM,WAAW,oNAAM,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,iBAAiB,gBAAgB,GAAG,WAAW,eAAe;gBAAE,UAAU;YAAK;YAC3H,MAAM,cAAc,oNAAM,CAAC,IAAI,CAAC,MAAM,CAAC;gBAAE,OAAO;oBAAC;oBAAS;iBAAS;gBAAE,UAAU;gBAAM,OAAO;YAAU;YACtG,aAAa,IAAI,CAAC;YAClB,YAAY,IAAI,eAAC,qXAAC;gBAAqB,WAAU;gBAAkC,OAAO;oBAAE,MAAM;oBAAG,KAAK;oBAAgB,OAAO,YAAY;oBAAG,QAAQ,YAAY;oBAAG,WAAW;oBAAyB,YAAY;gBAAoD;eAAhP,CAAC,IAAI,EAAE,GAAG;;;;;QACzC;QAEA,MAAM,UAAqB,EAAE;QAC7B,IAAK,IAAI,IAAI,GAAG,IAAI,UAAU,IAAK;YAC/B,MAAM,UAAU,IAAI,WAAW,WAAW;YAC1C,MAAM,eAAe;YACrB,yHAAyH;YACzH,MAAM,UAAU,iBAAiB,eAAe;YAChD,MAAM,SAAS,oNAAM,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,SAAS,UAAU,cAAc;gBAAE,UAAU;gBAAM,UAAU;gBAAM,OAAO,CAAC,IAAI,EAAE,GAAG;YAAC;YACrI,aAAa,IAAI,CAAC;YAElB,MAAM,YAAY;YAClB,MAAM,YAAY,aAAc,YAAY;YAC5C,MAAM,gBAAgB;YACtB,MAAM,iBAAiB;YACvB,MAAM,eAAe,oNAAM,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,WAAW,eAAe,gBAAgB;gBAAE,UAAU;gBAAM,OAAO;YAAY;YACvI,aAAa,IAAI,CAAC;YAElB,6GAA6G;YAC7G,sGAAsG;YACtG,MAAM,kBAAkB,SAAS,iBAAiB;YAElD,QAAQ,IAAI,CAAC;gBACT,YAAY,WAAW,CAAC,EAAE;gBAC1B,MAAM,AAAC,IAAI,MAAO;gBAClB,OAAO,MAAM;gBACb,QAAQ;gBACR,QAAQ;YACZ;QACJ;QAEA,iBAAiB;YAAE;YAAc;YAAa;YAAS;YAAY;YAAY,YAAY;QAAmB;IAChH,GAAG;QAAC;QAAY;KAAY;IAE5B,MAAM,cAAc,IAAA,uVAAO,EAAC;QACxB,IAAI,CAAC,eAAe,OAAO,EAAE;QAE7B,uFAAuF;QACvF,MAAM,gBAAgB;YACpB;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAED,OAAO,cAAc,OAAO,CAAC,GAAG,CAAC,CAAC,MAAe;YAC/C,MAAM,aAAa,KAAK,UAAU;YAClC,MAAM,aAAa,aAAa,CAAC,EAAE,IAAI;YACvC,2EAA2E;YAC3E,MAAM,YAAY,WAAW,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO;YAC/D,MAAM,mBAAmB,CAAC,OAAO,EAAE,WAAW;YAC9C,MAAM,mBAAmB,CAAC,OAAO,EAAE,WAAW;YAC9C,MAAM,YAAY,eAAe;YAEjC,4CAA4C;YAC5C,MAAM,YAAY,YAAY,CAAC,kBAAkB,EAAE,kBAAkB,GAAG;YACxE,MAAM,aAAa,CAAC,wKAAwK,EAAE,iBAAiB,CAAC,EAAE,WAAW;YAE7N,qBACI,qXAAC;gBAAmB,WAAU;gBAA4C,OAAO;oBAAE,MAAM,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC;oBAAE,OAAO,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC;oBAAE,QAAQ,GAAG,KAAK,MAAM,CAAC,EAAE,CAAC;oBAAE,QAAQ,GAAG,KAAK,MAAM,CAAC,EAAE,CAAC;gBAAC;0BACtL,cAAA,qXAAC;oBAAI,WAAW;;wBACX,WAAW,OAAO,CAAC;wBAAG;;;;;;;eAFrB,CAAC,EAAE,EAAE,GAAG;;;;;QAMxB;IACJ,GAAG;QAAC;QAAe;QAAY;KAAY;IAE3C,IAAA,yVAAS,EAAC;QACR,MAAM,SAAS,oNAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YAAE,SAAS;gBAAE,GAAG;YAAQ;QAAE;QAC9D,MAAM,SAAS,oNAAM,CAAC,MAAM,CAAC,MAAM;QACnC,UAAU,OAAO,GAAG;QACpB,UAAU,OAAO,GAAG;QAEpB,IAAI,CAAC,eAAe;QAEpB,oNAAM,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,KAAK,EAAE,cAAc,YAAY;QAE7D,kDAAkD;QAClD,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG;QAC/C,MAAM,cAAc,oNAAM,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,YAAY,YAAY;YAC3E,OAAO;YACP,UAAU;QACZ;QACA,oNAAM,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,KAAK,EAAE;QACnC,eAAe,OAAO,GAAG;QAEzB,oNAAM,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ;QAE1B,IAAI;QACJ,MAAM,SAAS;YACX,IAAI,CAAC,UAAU,OAAO,EAAE;YACxB,MAAM,eAAwE,CAAC;YAC/E,oNAAM,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;gBACzD,IAAI,KAAK,KAAK,KAAK,QAAQ;oBACvB,YAAY,CAAC,KAAK,EAAE,CAAC,GAAG;wBAAE,GAAG,KAAK,QAAQ,CAAC,CAAC;wBAAE,GAAG,KAAK,QAAQ,CAAC,CAAC;wBAAE,OAAO,KAAK,KAAK;oBAAC;gBACxF;YACJ;YACA,SAAS;YACT,mBAAmB,sBAAsB;QAC7C;QACA;QAEA,MAAM,mBAAmB,CAAC;YACtB,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAE;gBAC5B,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG;gBACzB,MAAM,OAAO,MAAM,KAAK,KAAK,SAAS,QAAS,MAAM,KAAK,KAAK,SAAS,QAAQ;gBAChF,IAAI,CAAC,QAAQ,AAAC,KAAa,SAAS,EAAE;gBAEtC,MAAM,YAAY,MAAM,KAAK,CAAC,UAAU,CAAC,UAAU,QAAS,MAAM,KAAK,CAAC,UAAU,CAAC,UAAU,QAAQ;gBACrG,MAAM,QAAQ,MAAM,KAAK,KAAK,UAAU,QAAS,MAAM,KAAK,KAAK,UAAU,QAAQ;gBAEnF,MAAM,gBAAgB,CAAC;oBACnB,IAAI,AAAC,KAAa,SAAS,EAAE;oBAC5B,KAAa,SAAS,GAAG;oBAC1B,eAAe,OAAO,GAAG;oBAEzB,UAAU;oBACV,IAAI,aAAa,CAAC,GAAG;wBACjB,cAAc;oBAClB;gBACJ;gBAEA,IAAI,WAAW;oBACX,cAAc,SAAS,UAAU,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;gBACxD,OAAO,IAAI,OAAO;oBACd,cAAc,CAAC;gBACnB;YACJ;QACJ;QAEA,oNAAM,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,kBAAkB;QAE3C,OAAO;YACH,qBAAqB;YACrB,oNAAM,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,kBAAkB;YAC5C,IAAG,QAAQ,oNAAM,CAAC,MAAM,CAAC,IAAI,CAAC;YAC9B,IAAG,QAAQ,oNAAM,CAAC,MAAM,CAAC,KAAK,CAAC;QACnC;IACF,GAAG;QAAC;QAAe;KAAU;IAE7B,6BAA6B;IAC7B,IAAA,yVAAS,EAAC;QACR,IAAI,UAAU,OAAO,EAAE;YACrB,UAAU,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG;QACtC;IACF,GAAG;QAAC;KAAQ;IAEZ,IAAA,yVAAS,EAAC;QACR,IAAI,cAAc,gBAAgB,OAAO,EAAE;YACvC,gBAAgB,OAAO,GAAG;YAE1B,IAAI,eAAe,OAAO,IAAI,UAAU,OAAO,EAAE;gBAC7C,oNAAM,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,OAAO,CAAC,KAAK,EAAE,eAAe,OAAO;gBACnE,eAAe,OAAO,GAAG;YAC7B;YAEA,0CAA0C;YAC1C,IAAI,eAAe,OAAO,IAAI,UAAU,OAAO,EAAE;gBAC7C,oNAAM,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,OAAO,CAAC,KAAK,EAAE,eAAe,OAAO;gBACnE,eAAe,OAAO,GAAG;YAC7B;YAEA,cAAc;YAEd,IAAI,UAAU,OAAO,IAAI,eAAe;gBACpC,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG;gBAC/C,MAAM,eAAe,CAAC,KAAK,MAAM,KAAK,GAAG,IAAI,aAAa;gBAC1D,MAAM,IAAI,aAAa;gBACvB,MAAM,OAAO,oNAAM,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,YAAY,YAAY;oBACzD,OAAO;oBAAQ,aAAa;oBAAK,UAAU;oBAAM,MAAM;oBAAK,SAAS;gBACzE;gBACA,oNAAM,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,OAAO,CAAC,KAAK,EAAE;YAClD;QACJ;IACF,GAAG;QAAC;QAAa;KAAc;IAE/B,qBACE,qXAAC;QAAI,KAAK;QAAU,WAAU;;YAC3B,eAAe;YACf;YACA,OAAO,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;gBACvB,MAAM,MAAM,KAAK,CAAC,GAAG;gBACrB,qBACE,qXAAC;oBAAa,WAAU;oBAAwB,OAAO;wBACnD,YAAY;wBACZ,WAAW;wBACX,OAAO,gBAAgB,cAAc,UAAU,GAAG,IAAI;wBACtD,QAAQ,gBAAgB,cAAc,UAAU,GAAG,IAAI;wBACvD,MAAM,IAAI,CAAC;wBACX,KAAK,IAAI,CAAC;wBACV,WAAW,CAAC,6BAA6B,EAAE,IAAI,KAAK,CAAC,IAAI,CAAC;oBAC9D;mBARU;;;;;YAUd;;;;;;;AAGN;uCAEe"}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":["file:///C:/25/nov-25/gamba/plinky/components/HistoryTable.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { GameResult } from '../types';\r\n\r\ninterface HistoryTableProps {\r\n  history: GameResult[];\r\n}\r\n\r\nconst HistoryTable: React.FC<HistoryTableProps> = ({ history }) => {\r\n  const stats = useMemo(() => {\r\n    if (history.length === 0) {\r\n      return {\r\n        totalGames: 0,\r\n        totalPayout: 0,\r\n        totalBets: 0,\r\n        actualEV: 0,\r\n        actualRTP: 0,\r\n        totalProfit: 0,\r\n      };\r\n    }\r\n\r\n    const totalGames = history.length;\r\n    const totalPayout = history.reduce((sum, result) => sum + result.payout, 0);\r\n    const totalBets = totalGames; // Each game costs 1\r\n    const totalProfit = history.reduce((sum, result) => sum + result.profit, 0);\r\n    const actualEV = totalPayout / totalGames; // Average payout per game\r\n    const actualRTP = totalPayout / totalBets; // Return to player percentage\r\n\r\n    return {\r\n      totalGames,\r\n      totalPayout,\r\n      totalBets,\r\n      actualEV,\r\n      actualRTP,\r\n      totalProfit,\r\n    };\r\n  }, [history]);\r\n\r\n  return (\r\n    <div className=\"p-4 space-y-4\">\r\n      {history.length > 0 && (\r\n        <div className=\"bg-gray-900/70 p-3 rounded-md space-y-2\">\r\n          <h4 className=\"font-semibold text-base text-white mb-3\">Actual Statistics</h4>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <div className=\"flex justify-between text-gray-300\">\r\n              <span>Total Games:</span>\r\n              <span className=\"font-mono text-white\">{stats.totalGames}</span>\r\n            </div>\r\n            <div className=\"flex justify-between text-gray-300\">\r\n              <span>Total Bets:</span>\r\n              <span className=\"font-mono text-white\">${stats.totalBets.toFixed(2)}</span>\r\n            </div>\r\n            <div className=\"flex justify-between text-gray-300\">\r\n              <span>Total Payout:</span>\r\n              <span className=\"font-mono text-white\">${stats.totalPayout.toFixed(2)}</span>\r\n            </div>\r\n            <div className=\"flex justify-between text-gray-300\">\r\n              <span>Total Profit:</span>\r\n              <span className=\"font-mono font-semibold\" style={{ color: stats.totalProfit >= 0 ? '#3e9c35' : '#ef4444' }}>\r\n                {stats.totalProfit >= 0 ? '+' : ''}${stats.totalProfit.toFixed(2)}\r\n              </span>\r\n            </div>\r\n            <div className=\"border-t border-gray-700 pt-2 mt-2\">\r\n              <div className=\"flex justify-between text-gray-300\">\r\n                <span>Actual EV (Avg Payout):</span>\r\n                <span className=\"font-mono\" style={{ color: '#3e9c35' }}>{stats.actualEV.toFixed(4)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-gray-300 mt-1\">\r\n                <span>Actual RTP:</span>\r\n                <span className=\"font-mono\" style={{ color: '#3e9c35' }}>{(stats.actualRTP * 100).toFixed(2)}%</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"overflow-y-auto max-h-[60vh]\">\r\n        <table className=\"w-full text-sm text-left text-gray-300\">\r\n          <thead className=\"text-xs text-gray-400 uppercase bg-gray-700/50 sticky top-0\">\r\n            <tr>\r\n              <th scope=\"col\" className=\"px-4 py-2 font-mono\">Multiplier</th>\r\n              <th scope=\"col\" className=\"px-4 py-2 font-mono\">Payout</th>\r\n              <th scope=\"col\" className=\"px-4 py-2 font-mono text-right\">Profit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {history.length === 0 && (\r\n              <tr>\r\n                  <td colSpan={3} className=\"text-center py-8 text-gray-500\">No games played yet.</td>\r\n              </tr>\r\n            )}\r\n            {history.map(result => (\r\n              <tr key={result.id} className=\"border-b border-gray-700 hover:bg-gray-700/50\">\r\n                <td className=\"px-4 py-2 font-mono\">{result.multiplier.toFixed(2)}x</td>\r\n                <td className=\"px-4 py-2 font-mono\">${result.payout.toFixed(2)}</td>\r\n                <td className=\"px-4 py-2 font-mono text-right font-semibold\" style={{ color: result.profit >= 0 ? '#3e9c35' : '#ef4444' }}>\r\n                  {result.profit >= 0 ? '+' : ''}${result.profit.toFixed(2)}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HistoryTable;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 816, "column": 0}, "map": {"version":3,"sources":["file:///C:/25/nov-25/gamba/plinky/App.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport PlinkoBoard from './components/PlinkoBoard';\nimport HistoryTable from './components/HistoryTable';\nimport { GameResult } from './types';\nimport { MULTIPLIERS, ROWS } from './constants';\n\ntype DevToolsTab = 'devtools' | 'balance' | 'history';\n\nconst App: React.FC = () => {\n  const [balance, setBalance] = useState<number>(1000);\n  const [multipliers, setMultipliers] = useState<number[]>(MULTIPLIERS);\n  const [history, setHistory] = useState<GameResult[]>([]);\n  const [playTrigger, setPlayTrigger] = useState(0);\n  const [isBallInPlay, setIsBallInPlay] = useState<boolean>(false);\n  const [isDevToolsVisible, setIsDevToolsVisible] = useState(false);\n  const [devToolsTab, setDevToolsTab] = useState<DevToolsTab>('devtools');\n  const [lastPayout, setLastPayout] = useState<{ payout: number; key: number } | null>(null);\n  const [simulationResult, setSimulationResult] = useState<string | null>(null);\n  const [targetRTP, setTargetRTP] = useState(0.95);\n  const [isCalculating, setIsCalculating] = useState(false);\n  const mainRef = useRef<HTMLElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [rowSpacing, setRowSpacing] = useState<number>(0);\n  const [containerHeight, setContainerHeight] = useState<number>(0);\n  \n  // Gravity calibration state\n  const [gravity, setGravity] = useState<number>(0.1);\n  const binDistributionRef = useRef<number[]>([]);\n  const calibrationHistoryRef = useRef<number[]>([]);\n\n  const BET_AMOUNT = 1;\n\n  // Calculate binomial coefficient (n choose k)\n  const binomialCoefficient = (n: number, k: number): number => {\n    if (k > n - k) k = n - k;\n    let result = 1;\n    for (let i = 0; i < k; i++) {\n      result = result * (n - i) / (i + 1);\n    }\n    return result;\n  };\n\n  // Calculate exact probabilities for each bin using binomial distribution\n  const calculateBinProbabilities = useCallback((binCount: number): number[] => {\n    const probabilities: number[] = new Array(binCount).fill(0);\n    const totalPaths = Math.pow(2, ROWS);\n    \n    // Starting position is center: (binCount - 1) / 2\n    const centerPos = (binCount - 1) / 2;\n    \n    // For each possible number of right moves (0 to ROWS)\n    for (let rightMoves = 0; rightMoves <= ROWS; rightMoves++) {\n      const leftMoves = ROWS - rightMoves;\n      \n      // Calculate final position: center + (rightMoves - leftMoves) * 0.5\n      // Each move shifts by 0.5 positions\n      const finalPosition = centerPos + (rightMoves - leftMoves) * 0.5;\n      \n      // Round to nearest bin (bins are at integer positions 0, 1, 2, ..., binCount-1)\n      const targetBin = Math.round(finalPosition);\n      \n      // Clamp to valid bin range\n      if (targetBin >= 0 && targetBin < binCount) {\n        const ways = binomialCoefficient(ROWS, rightMoves);\n        probabilities[targetBin] += ways / totalPaths;\n      }\n    }\n    \n    return probabilities;\n  }, []);\n\n  // Calculate expected value deterministically\n  const calculateExpectedValue = useCallback((multipliers: number[]): number => {\n    const probabilities = calculateBinProbabilities(multipliers.length);\n    let ev = 0;\n    for (let i = 0; i < multipliers.length; i++) {\n      ev += probabilities[i] * multipliers[i];\n    }\n    return ev;\n  }, [calculateBinProbabilities]);\n\n  // Initialize bin distribution tracking\n  useEffect(() => {\n    binDistributionRef.current = new Array(multipliers.length).fill(0);\n  }, [multipliers.length]);\n\n  // Calculate perfect container height based on width for even row divisions\n  // Container = header (vSpacing) + main + footer (vSpacing)\n  // Main = space above ball (vSpacing) + ball-to-row0 (vSpacing) + between rows (ROWS-1)*vSpacing + space after last peg (vSpacing) + to bins (vSpacing) = (ROWS+3)*vSpacing\n  // So: containerHeight = 2*vSpacing + (ROWS+3)*vSpacing + bottomPadding = (ROWS+5)*vSpacing + bottomPadding\n  useEffect(() => {\n    const updateContainer = () => {\n      if (!containerRef.current) return;\n      const width = containerRef.current.clientWidth || window.innerWidth;\n      const binCount = multipliers.length;\n      const hSpacing = width / binCount;\n      const bottomPadding = hSpacing;\n      \n      const screenHeight = window.innerHeight;\n      const totalSpacings = ROWS + 5; // header + above ball + between rows + after last peg + to bins + footer\n      \n      // Calculate vSpacing that fits screen\n      const estimatedVSpacing = (screenHeight - bottomPadding) / totalSpacings;\n      \n      // Calculate perfect container height (must be exactly divisible)\n      const perfectHeight = estimatedVSpacing * totalSpacings + bottomPadding;\n      \n      // Constrain to screen but keep perfect division\n      const finalHeight = Math.min(perfectHeight, screenHeight);\n      const finalVSpacing = (finalHeight - bottomPadding) / totalSpacings;\n      \n      setContainerHeight(finalHeight);\n      setRowSpacing(finalVSpacing);\n    };\n    \n    // Wait for container to be rendered\n    const timeoutId = setTimeout(updateContainer, 0);\n    window.addEventListener('resize', updateContainer);\n    return () => {\n      clearTimeout(timeoutId);\n      window.removeEventListener('resize', updateContainer);\n    };\n  }, [multipliers]);\n\n  const handlePlay = useCallback(() => {\n    if (balance < BET_AMOUNT || isBallInPlay) {\n      return;\n    }\n    setIsBallInPlay(true);\n    setLastPayout(null); // Clear payout display when starting new play\n    setBalance(prev => prev - BET_AMOUNT);\n    setPlayTrigger(prev => prev + 1);\n  }, [balance, isBallInPlay]);\n\n  // Calculate expected distribution (binomial)\n  const getExpectedDistribution = useCallback((): number[] => {\n    return calculateBinProbabilities(multipliers.length);\n  }, [multipliers.length, calculateBinProbabilities]);\n\n  // PID-like gravity calibration\n  const calibrateGravity = useCallback(() => {\n    const totalGames = binDistributionRef.current.reduce((a, b) => a + b, 0);\n    if (totalGames < 20) return; // Need at least 20 games for calibration\n    \n    const expectedDist = getExpectedDistribution();\n    const actualDist = binDistributionRef.current.map(count => count / totalGames);\n    \n    // Calculate error: how much the distribution is skewed toward center\n    // If balls cluster in center, gravity is too low\n    const centerBins = [3, 4]; // Indices of center bins (0.58x)\n    const edgeBins = [0, 1, 6, 7]; // Indices of edge bins\n    \n    let centerError = 0;\n    let edgeError = 0;\n    \n    centerBins.forEach(i => {\n      centerError += actualDist[i] - expectedDist[i];\n    });\n    \n    edgeBins.forEach(i => {\n      edgeError += expectedDist[i] - actualDist[i];\n    });\n    \n    // If too many balls in center, increase gravity\n    // If too many balls at edges, decrease gravity\n    const error = centerError - edgeError;\n    \n    // PID controller parameters\n    const Kp = 0.5; // Proportional gain\n    const Ki = 0.1; // Integral gain\n    const Kd = 0.05; // Derivative gain\n    \n    // Store error history for integral and derivative terms\n    calibrationHistoryRef.current.push(error);\n    if (calibrationHistoryRef.current.length > 10) {\n      calibrationHistoryRef.current.shift();\n    }\n    \n    const integral = calibrationHistoryRef.current.reduce((a, b) => a + b, 0);\n    const derivative = calibrationHistoryRef.current.length > 1 \n      ? error - calibrationHistoryRef.current[calibrationHistoryRef.current.length - 2]\n      : 0;\n    \n    const adjustment = Kp * error + Ki * integral + Kd * derivative;\n    \n    // Update gravity (clamp between 0.01 and 0.5)\n    const newGravity = Math.max(0.01, Math.min(0.5, gravity + adjustment * 0.01));\n    setGravity(newGravity);\n    \n    // Reset distribution every 50 games for continuous calibration\n    if (totalGames >= 50) {\n      binDistributionRef.current = new Array(multipliers.length).fill(0);\n    }\n  }, [gravity, multipliers.length, getExpectedDistribution]);\n\n  const handleGameEnd = useCallback((finalBinIndex: number) => {\n    const isLoss = finalBinIndex === -1;\n    const multiplier = isLoss ? 0 : multipliers[finalBinIndex];\n    const payout = BET_AMOUNT * multiplier;\n    const profit = payout - BET_AMOUNT;\n\n    // Track distribution for gravity calibration\n    if (!isLoss && finalBinIndex >= 0 && finalBinIndex < multipliers.length) {\n      binDistributionRef.current[finalBinIndex]++;\n      calibrateGravity();\n    }\n\n    setBalance(prev => prev + payout);\n    const newResult: GameResult = {\n      id: Date.now() + Math.random(),\n      multiplier,\n      payout,\n      profit,\n    };\n    setHistory(prev => [newResult, ...prev.slice(0, 14)]);\n    setLastPayout({ payout, key: Date.now() });\n    setIsBallInPlay(false); // Re-enable button when game ends\n  }, [multipliers, calibrateGravity]);\n  \n  const runSimulation = (simMultipliers: number[], runs: number) => {\n    let totalPayout = 0;\n    const binCount = simMultipliers.length;\n    for (let i = 0; i < runs; i++) {\n        let position = (binCount - 1) / 2;\n        for (let j = 0; j < ROWS; j++) {\n            position += Math.random() < 0.5 ? -0.5 : 0.5;\n        }\n        const finalBinIndex = Math.max(0, Math.min(binCount - 1, Math.round(position)));\n        totalPayout += simMultipliers[finalBinIndex];\n    }\n    return totalPayout / runs;\n  }\n\n  const handleSimulate = useCallback(() => {\n    // Use deterministic calculation for exact EV\n    const ev = calculateExpectedValue(multipliers);\n    const houseEdge = (1 - ev) * 100;\n    const probabilities = calculateBinProbabilities(multipliers.length);\n    \n    let probText = 'Bin Probabilities:\\n';\n    probabilities.forEach((prob, i) => {\n      probText += `Bin ${i}: ${(prob * 100).toFixed(2)}% (${multipliers[i]}x)\\n`;\n    });\n    \n    const resultText = `Expected Value (EV): ${ev.toFixed(4)}\\nReturn to Player (RTP): ${(ev * 100).toFixed(2)}%\\nHouse Edge: ${houseEdge.toFixed(2)}%\\n\\n${probText}`;\n    setSimulationResult(resultText);\n  }, [multipliers, calculateExpectedValue, calculateBinProbabilities]);\n  \n  const handleRecalculateMultipliers = useCallback(() => {\n    setIsCalculating(true);\n    setTimeout(() => {\n        const baseEV = calculateExpectedValue(multipliers);\n        if (baseEV === 0) {\n          setSimulationResult('Error: Cannot calculate RTP. Check probability calculation.');\n          setIsCalculating(false);\n          return;\n        }\n        const scalingFactor = targetRTP / baseEV;\n        const newMultipliers = multipliers.map(m => parseFloat((m * scalingFactor).toPrecision(3)));\n        setMultipliers(newMultipliers);\n        \n        const finalEV = calculateExpectedValue(newMultipliers);\n        const houseEdge = (1 - finalEV) * 100;\n        const resultText = `Target RTP: ${(targetRTP * 100).toFixed(2)}%\\n---\\nActual RTP: ${(finalEV * 100).toFixed(2)}%\\nHouse Edge: ${houseEdge.toFixed(2)}%\\n\\nNew Multipliers:\\n${newMultipliers.map((m, i) => `Bin ${i}: ${m.toFixed(2)}x`).join('\\n')}`;\n        setSimulationResult(resultText);\n        setIsCalculating(false);\n    }, 50);\n  }, [multipliers, targetRTP, calculateExpectedValue]);\n\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white flex justify-center\">\n      <div \n        ref={containerRef}\n        className=\"relative bg-gradient-to-b from-gray-800 to-black shadow-2xl flex flex-col overflow-hidden w-full\"\n        style={{ \n          height: containerHeight || '100vh',\n          maxHeight: '100vh'\n        }}\n      >\n        \n        <div className=\"absolute top-4 left-0 right-0 flex justify-center z-10 pointer-events-none\">\n           {lastPayout && (\n              <span key={lastPayout.key} className=\"font-mono text-4xl font-bold\" style={{ color: '#3e9c35' }}>\n                +${lastPayout.payout.toFixed(2)}\n              </span>\n            )}\n        </div>\n        \n        <header \n          className=\"absolute top-0 left-0 right-0 px-4 flex justify-end items-center z-20\"\n          style={{ height: rowSpacing || 'auto', paddingTop: rowSpacing ? `${rowSpacing * 0.25}px` : '1rem', paddingBottom: rowSpacing ? `${rowSpacing * 0.25}px` : '1rem' }}\n        >\n          <button onClick={() => setIsDevToolsVisible(true)} className=\"bg-purple-700/50 hover:bg-purple-700/80 text-white font-semibold py-1 px-2 rounded-lg text-xs transition-colors\">\n            Dev Tools\n          </button>\n        </header>\n\n        <main ref={mainRef} className=\"flex-grow\" style={{ paddingTop: rowSpacing || 0 }}>\n           <PlinkoBoard \n              multipliers={multipliers}\n              playTrigger={playTrigger}\n              onGameEnd={handleGameEnd}\n              gravity={gravity}\n          />\n        </main>\n        \n        <footer \n          className=\"px-4 bg-gradient-to-t from-black/80 to-transparent flex justify-center items-center\"\n          style={{ height: rowSpacing || 'auto', paddingTop: rowSpacing ? `${rowSpacing * 0.25}px` : '1rem', paddingBottom: rowSpacing ? `${rowSpacing * 0.25}px` : '1rem' }}\n        >\n            <button\n                onClick={handlePlay}\n                disabled={balance < BET_AMOUNT || isBallInPlay}\n                className=\"w-full text-gray-900 font-bold py-3 rounded-md text-lg uppercase transition-all duration-300 disabled:from-gray-600 disabled:to-gray-700 disabled:text-gray-400 disabled:shadow-none\"\n                style={{\n                    background: (balance < BET_AMOUNT || isBallInPlay) ? 'linear-gradient(to right, #4b5563, #374151)' : 'linear-gradient(to right, #168118, #157811)',\n                    boxShadow: (balance < BET_AMOUNT || isBallInPlay) ? 'none' : '0 0 5px #168118, 0 0 10px #168118'\n                }}\n                onMouseEnter={(e) => {\n                    if (balance >= BET_AMOUNT && !isBallInPlay) {\n                        e.currentTarget.style.background = 'linear-gradient(to right, #3e9c35, #168118)';\n                    }\n                }}\n                onMouseLeave={(e) => {\n                    if (balance >= BET_AMOUNT && !isBallInPlay) {\n                        e.currentTarget.style.background = 'linear-gradient(to right, #168118, #157811)';\n                    }\n                }}\n            >\n                PLAY\n            </button>\n        </footer>\n\n        {isDevToolsVisible && (\n            <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm z-40 flex items-center justify-center p-4\" onClick={() => setIsDevToolsVisible(false)}>\n                <div className=\"w-full max-w-md bg-gray-800 rounded-lg shadow-xl\" onClick={e => e.stopPropagation()}>\n                    <div className=\"p-4 flex justify-between items-center border-b border-gray-700\">\n                        <h3 className=\"text-lg font-semibold text-white\">Dashboard</h3>\n                        <button onClick={() => setIsDevToolsVisible(false)} className=\"text-gray-400 hover:text-white text-2xl leading-none\">&times;</button>\n                    </div>\n                    \n                    <div className=\"flex border-b border-gray-700\">\n                        <button onClick={() => setDevToolsTab('devtools')} className={`flex-1 py-2 text-sm font-semibold transition-colors ${devToolsTab === 'devtools' ? 'border-b-2' : 'text-gray-400 hover:text-gray-200'}`} style={devToolsTab === 'devtools' ? { color: '#3e9c35', borderColor: '#3e9c35' } : {}}>Dev Tools</button>\n                        <button onClick={() => setDevToolsTab('balance')} className={`flex-1 py-2 text-sm font-semibold transition-colors ${devToolsTab === 'balance' ? 'border-b-2' : 'text-gray-400 hover:text-gray-200'}`} style={devToolsTab === 'balance' ? { color: '#3e9c35', borderColor: '#3e9c35' } : {}}>Balance</button>\n                        <button onClick={() => setDevToolsTab('history')} className={`flex-1 py-2 text-sm font-semibold transition-colors ${devToolsTab === 'history' ? 'border-b-2' : 'text-gray-400 hover:text-gray-200'}`} style={devToolsTab === 'history' ? { color: '#3e9c35', borderColor: '#3e9c35' } : {}}>History</button>\n                    </div>\n\n                    {devToolsTab === 'devtools' && (\n                        <div className=\"p-4 space-y-4\">\n                            <div className=\"bg-gray-900/70 p-3 rounded-md space-y-3\">\n                                <h4 className=\"font-semibold text-base text-white\">Gravity Calibration</h4>\n                                <div>\n                                    <label className=\"flex justify-between text-sm text-gray-300\">\n                                      <span>Current Gravity</span>\n                                      <span className=\"font-mono\" style={{ color: '#3e9c35' }}>{gravity.toFixed(3)}</span>\n                                    </label>\n                                    <div className=\"mt-2 text-xs text-gray-400\">\n                                      Distribution: {binDistributionRef.current.reduce((a, b) => a + b, 0)} games tracked\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"bg-gray-900/70 p-3 rounded-md space-y-3\">\n                                <h4 className=\"font-semibold text-base text-white\">Game Economy</h4>\n                                <div>\n                                    <label htmlFor=\"rtp-slider\" className=\"flex justify-between text-sm text-gray-300\">\n                                      <span>Target RTP</span>\n                                      <span className=\"font-mono\" style={{ color: '#3e9c35' }}>{(targetRTP * 100).toFixed(1)}%</span>\n                                    </label>\n                                    <input id=\"rtp-slider\" type=\"range\" min=\"0.90\" max=\"1.00\" step=\"0.005\" value={targetRTP} onChange={(e) => setTargetRTP(parseFloat(e.target.value))}\n                                        className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg mt-1\"\n                                        style={{ accentColor: '#168118' }} />\n                                </div>\n                                <button onClick={handleRecalculateMultipliers} disabled={isCalculating} className=\"w-full bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-500 transition-colors disabled:bg-gray-600\">\n                                    {isCalculating ? 'Calculating...' : 'Calibrate Multipliers'}\n                                </button>\n                            </div>\n                            <p className=\"text-xs text-gray-500\">\n                                Simulate 100 runs with the current multipliers to see the approximate RTP.\n                            </p>\n                            <button onClick={handleSimulate} className=\"w-full text-white px-4 py-2 rounded transition-colors\" style={{ backgroundColor: 'rgba(22, 129, 24, 0.8)' }} onMouseEnter={(e) => e.currentTarget.style.backgroundColor = 'rgba(22, 129, 24, 1)'} onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'rgba(22, 129, 24, 0.8)'}>\n                                Check Current RTP\n                            </button>\n                            {simulationResult && (\n                                <div className=\"bg-gray-900 p-3 rounded mt-2\">\n                                    <pre className=\"text-xs text-white whitespace-pre-wrap font-mono\">{simulationResult}</pre>\n                                </div>\n                            )}\n                        </div>\n                    )}\n                    {devToolsTab === 'balance' && (\n                        <div className=\"p-4 text-center\">\n                            <span className=\"text-sm text-gray-400\">Current Balance</span>\n                            <p className=\"font-mono text-3xl mt-1\">${balance.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</p>\n                        </div>\n                    )}\n                    {devToolsTab === 'history' && (\n                        <HistoryTable history={history} />\n                    )}\n                </div>\n            </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;"],"names":[],"mappings":"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"}}]
}